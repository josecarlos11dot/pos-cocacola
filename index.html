<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>POS Coca-Cola ‚Äî Ventas con Mosaico + Orden</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>POS Coca-Cola</h1>
    <p class="muted">Ventas por mosaico (click/touch), carrito/orden, ingreso r√°pido (F2) y esc√°ner f√≠sico opcional.</p>
  </header>

  <main>
    <!-- ===== 1) Ventas (principal, ancho completo) ===== -->
    <section class="card venta-principal" id="seccionVentas">
      <div class="header-line">
        <h2>üßæ Ventas</h2>
        <div class="toolbar">
          <button id="btnIngresoRapido" class="primary" title="F2">+ Ingreso r√°pido (F2)</button>
          <button id="btnUndo" class="ghost" title="Ctrl+Z">‚Ü© Deshacer √∫ltimo</button>
        </div>
      </div>

      <!-- Controles de b√∫squeda y vista -->
      <div class="venta-controls">
        <div class="field">
          <label>Buscar producto</label>
          <input id="ventaBuscar" type="text" placeholder="Ej. coca, sprite, agua‚Ä¶">
        </div>
        <div class="field small">
          <label>&nbsp;</label>
          <button id="btnClearSearch" class="ghost">Limpiar</button>
        </div>
      </div>

      <!-- Mosaico interactivo -->
      <div id="ventaMosaico" class="grid-mosaic"></div>

      <!-- Panel de orden (carrito) -->
      <div class="order-panel">
        <div class="order-header">
          <div>
            <strong>Orden actual</strong>
            <span class="muted" id="orderItemsCount">0 art√≠culos</span>
          </div>
          <div class="order-actions">
            <button id="btnOrderClear" class="ghost">Vaciar</button>
            <button id="btnOrderCancel" class="ghost danger">Cancelar</button>
            <button id="btnOrderCheckout" class="primary">Cerrar orden (Cobrar)</button>
          </div>
        </div>

        <table id="orderTable" class="tabla-compacta">
          <thead>
            <tr>
              <th>Producto</th>
              <th style="width:110px;">Cant.</th>
              <th style="width:110px;">Precio</th>
              <th style="width:120px;">Subtotal</th>
              <th style="width:60px;"></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <div class="order-total">
          <div class="order-total-line">
            <span>Art√≠culos</span>
            <strong id="orderCount">0</strong>
          </div>
          <div class="order-total-line">
            <span>Total</span>
            <strong id="orderTotal">$0.00</strong>
          </div>
        </div>
      </div>

      <!-- (opcional) Entrada por esc√°ner f√≠sico -->
      <div class="row" style="margin-top:10px">
        <div class="field">
          <label>Esc√°ner / C√≥digo detectado (opcional)</label>
          <input id="ventaScan" type="text" autocomplete="off" placeholder="Escanea aqu√≠ y Enter para agregar al carrito">
        </div>
        <div class="field">
          <label>√öltimo producto detectado</label>
          <input id="ventaUltimo" type="text" disabled>
        </div>
      </div>

      <p class="muted">
        Tip: click/touch = agrega 1 al carrito ‚Ä¢ <b>Alt+click</b> / <b>mantener presionado</b> = cantidad personalizada ‚Ä¢
        Si no hay stock, el tile vibra.
      </p>

      <!-- Resumen de ventas (hoy) -->
      <div class="ventas-resumen">
        <div class="kpi">
          <div class="kpi-label">Art√≠culos vendidos (hoy)</div>
          <div class="kpi-value" id="kpiVentasUnidades">0</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Total vendido (hoy)</div>
          <div class="kpi-value" id="kpiVentasTotal">$0.00</div>
        </div>
      </div>

      <table id="tablaVentasHoy" class="tabla-compacta">
        <thead>
          <tr>
            <th>Hora</th>
            <th>Producto</th>
            <th>Unid.</th>
            <th>Precio</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- ===== 2) Cat√°logo ===== -->
    <section class="card" id="seccionCatalogo">
      <div class="header-line">
        <h2>üóÇÔ∏è Cat√°logo</h2>
        <div class="toolbar">
          <button id="btnAgregarProducto" class="ghost">+ Producto</button>
          <button id="btnGuardarCatalogo" class="primary">Guardar cat√°logo</button>
        </div>
      </div>
      <table id="tablaCatalogo">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Unid./paquete</th>
            <th>Precio</th>
            <th>C√≥digo (unidad)</th>
            <th>Color</th>
            <th>Emoji</th>
            <th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <p class="muted">Los campos <b>Color</b> y <b>Emoji</b> dan estilo a los mosaicos. Puedes dejarlos vac√≠os.</p>
      <div class="toolbar">
        <button id="btnAgregarProducto" class="ghost">+ Producto</button>
        <button id="btnRestaurarCatalogo" class="ghost">‚Ü∫ Restaurar cat√°logo base</button>
        <button id="btnGuardarCatalogo" class="primary">Guardar cat√°logo</button>
      </div>
      
    </section>

    <!-- ===== 3) Inventario ===== -->
    <section class="card" id="seccionInventario">
      <div class="header-line">
        <h2>üìä Inventario actual</h2>
        <div class="toolbar">
          <button id="btnRecalcular" class="ghost">Recalcular</button>
          <button id="btnResetear" class="ghost danger" title="Borrar datos locales (solo desarrollo)">Reset local</button>
        </div>
      </div>
      <table id="tablaInventario">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Unid./paquete</th>
            <th>Stock (unid.)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <p class="muted">El inventario = Entradas ‚àí Salidas.</p>
    </section>

    <!-- ===== 4) Movimientos ===== -->
    <section class="card" id="seccionMovimientos">
      <h2>üìú Movimientos recientes</h2>
      <table id="tablaMovimientos">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Tipo</th>
            <th>Producto</th>
            <th>Cant. (unid.)</th>
            <th>Nota</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

<!-- ===== Modal: Ingreso r√°pido (F2) ‚Äî SIN esc√°ner ===== -->
<div id="modalIngreso" class="modal hidden" aria-hidden="true">
  <div class="modal__dialog">
    <div class="modal__header">
      <h3>üì• Ingreso r√°pido manual</h3>
      <button id="modalIngresoCerrar" class="ghost" title="Esc">‚úï</button>
    </div>

    <div class="modal__body">
      <p class="muted">Selecciona un producto y registra entradas al inventario. El precio se define en el <b>Cat√°logo</b>.</p>

      <div class="row">
        <div class="field">
          <label>Producto</label>
          <select id="modalProducto"></select>
        </div>

        <div class="field">
          <label>Modo</label>
          <div class="segmented">
            <label><input type="radio" name="modoIngreso" value="unidad" checked> Unidad</label>
            <label><input type="radio" name="modoIngreso" value="lote"> Lote</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="field" id="fieldCantidad">
          <label>Cantidad</label>
          <input id="modalCantidad" type="number" min="1" value="1" disabled>
        </div>

        <div class="field">
          <label>Nota (opcional)</label>
          <input id="modalNota" type="text" placeholder="Ej. Pedido proveedor, reposici√≥n‚Ä¶">
        </div>
      </div>

      <div class="row">
        <div class="field">
          <button id="modalIngresoAgregar" class="primary">‚ûï Agregar al inventario</button>
        </div>
        <div class="field">
          <label>Unidades capturadas en esta sesi√≥n</label>
          <input id="modalIngresoContador" type="text" disabled value="0">
        </div>
      </div>
    </div>

    <div class="modal__footer">
      <button id="modalIngresoTerminar" class="warn" title="Esc">Terminar ingreso (Esc)</button>
    </div>
  </div>
</div>


  <footer>
    <small class="muted">Mosaico + carrito listos. Pr√≥ximo: ticket imprimible y descuentos r√°pidos.</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
