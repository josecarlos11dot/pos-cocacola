/* ===== Base ===== */
:root{--gap:12px;--radius:14px}
*{box-sizing:border-box}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;margin:0;background:#0f172a;color:#e2e8f0}
header{padding:20px;border-bottom:1px solid #1f2a44;background:#111827;position:sticky;top:0}
header h1{margin:0;font-size:18px}
main{padding:20px;display:grid;gap:var(--gap);grid-template-columns:1fr 1fr}
.venta-principal{grid-column:1 / -1;border:2px solid #2563eb}
.card{background:#0b1220;border:1px solid #1f2a44;border-radius:var(--radius);padding:16px;box-shadow:0 6px 20px rgba(0,0,0,.25)}
h2{margin:.2rem 0 1rem;font-size:16px}
.row{display:grid;gap:8px;grid-template-columns:1fr 1fr;margin-bottom:8px}
.field label{font-size:12px;color:#94a3b8;display:block;margin-bottom:6px}
select,input,button{width:100%;padding:10px;border-radius:10px;border:1px solid #233252;background:#0a1020;color:#e5e7eb}
input[type="number"]{appearance:textfield}
button{cursor:pointer}
button.primary{background:#2563eb;border-color:#2563eb}
button.warn{background:#f59e0b;border-color:#f59e0b}
button.ghost{background:transparent}
button.danger{border-color:#7f1d1d;color:#fecaca}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #1f2a44;text-align:left;font-size:13px}
th{color:#93c5fd}
.header-line{display:flex;align-items:center;justify-content:space-between;gap:10px}
.muted{color:#94a3b8;font-size:12px}
footer{padding:20px;text-align:center;color:#94a3b8}
@media (max-width: 1140px){ main{grid-template-columns:1fr} }
tr.total-row{background:#1e293b;color:#facc15;font-weight:bold}

/* ===== KPIs ventas ===== */
.ventas-resumen{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px;margin-bottom:8px}
.kpi{background:#0a1020;border:1px solid #1f2a44;border-radius:12px;padding:10px 14px;min-width:180px}
.kpi-label{font-size:12px;color:#94a3b8}
.kpi-value{font-size:20px;font-weight:700;margin-top:4px}
.tabla-compacta th,.tabla-compacta td{padding:6px 8px;font-size:12.5px}

/* ===== Filtro ventas ===== */
.venta-controls{display:grid;grid-template-columns:1fr auto;gap:10px;margin-bottom:10px}
.field.small button{height:40px}

/* ===== Mosaico ===== */
.grid-mosaic{
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  gap:10px;
}
@media (max-width: 1400px){ .grid-mosaic{ grid-template-columns: repeat(5, 1fr); } }
@media (max-width: 1140px){ .grid-mosaic{ grid-template-columns: repeat(3, 1fr); } }
@media (max-width: 700px) { .grid-mosaic{ grid-template-columns: repeat(2, 1fr); } }

.tile{
  position:relative; overflow:hidden; border-radius:16px;
  background:linear-gradient(135deg,#1b2338,#0a1020);
  border:1px solid #20304f; padding:12px; cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
  min-height:140px; display:flex; flex-direction:column; justify-content:space-between;
}
.tile__img{
  position:absolute;
  right:10px; 
  bottom:10px;
  width:64px;
  height:64px;
  object-fit:cover;
  border-radius:12px;
  border:1px solid #20304f;
  box-shadow:0 6px 18px rgba(0,0,0,.35);
}
.tile__emoji{ position:absolute; right:12px; bottom:12px; } /* ya existía; asegúrate de mantenerla */


.tile:hover{ transform: translateY(-2px); box-shadow:0 12px 26px rgba(0,0,0,.35) }
.tile:active{ transform: scale(.99) }
.tile__emoji{ font-size:34px; line-height:1; filter: drop-shadow(0 2px 6px rgba(0,0,0,.5)); }
.tile__title{ font-weight:700; font-size:14px; margin-top:6px }
.tile__price{ font-size:13px; color:#93c5fd }
.tile__footer{ display:flex; align-items:center; justify-content:space-between; gap:8px }
.tile__stock{
  font-size:12px; color:#9ca3af; background:#0a1324; border:1px solid #1f2a44; padding:4px 6px; border-radius:8px;
}
.tile__pulse{ position:absolute; inset:auto -10% -10% -10%; height:50%; background: radial-gradient(60% 100% at 50% 100%, rgba(255,255,255,.06), transparent); pointer-events:none; }
.tile--no-stock{ opacity:.55; filter:grayscale(.35) }
.tile--shake{ animation: shake .3s linear 1 }
@keyframes shake {
  0%,100%{ transform: translateX(0) }
  20%{ transform: translateX(-3px) }
  40%{ transform: translateX(3px) }
  60%{ transform: translateX(-2px) }
  80%{ transform: translateX(2px) }
}

/* Chapita de cantidad en el tile */
.badge-on-tile{
  position:absolute; top:8px; right:8px; background:#2563eb; color:#fff; font-weight:700;
  border-radius:999px; padding:2px 8px; font-size:12px; box-shadow:0 2px 8px rgba(0,0,0,.35);
}

/* ===== Modal ===== */
.modal.hidden{display:none}
.modal{position:fixed;inset:0;z-index:1000;background:rgba(0,0,0,.5);display:grid;place-items:center}
.modal__dialog{width:min(720px,92vw);background:#0b1220;border:1px solid #1f2a44;border-radius:14px;box-shadow:0 6px 28px rgba(0,0,0,.45);padding:12px 12px 16px}
.modal__header,.modal__footer{display:flex;align-items:center;justify-content:space-between;gap:10px}
.modal__header h3{margin:6px 0 6px}
.modal__body{margin:8px 0 12px}
input:disabled{opacity:.8}
.segmented{display:flex;gap:12px}

/* ===== Panel de orden ===== */
.order-panel{
  margin-top:12px; border:1px solid #1f2a44; border-radius:14px; background:#0a1020;
  padding:10px;
}
.order-header{
  display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px;
}
.order-actions{ display:flex; gap:8px; }
.order-total{
  margin-top:8px; display:flex; align-items:center; justify-content:flex-end; gap:18px;
}
.order-total-line{ display:flex; gap:8px; align-items:center; }
.order-qty{
  display:flex; gap:6px; align-items:center; justify-content:center;
}
.order-qty button{
  width:28px; height:28px; padding:0; line-height:1; border-radius:8px;
}
/* KPIs mejorados */
.kpis-row {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.kpi {
  background: linear-gradient(135deg, #f8fafc, #e2e8f0);
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  padding: 12px 16px;
  min-width: 140px;
  text-align: center;
  transition: transform 0.2s ease;
}

.kpi:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.kpi-hoy {
  border-color: #3b82f6;
  background: linear-gradient(135deg, #eff6ff, #dbeafe);
}

.kpi-semana {
  border-color: #10b981;
  background: linear-gradient(135deg, #f0fdf4, #dcfce7);
}

.kpi-total {
  border-color: #f59e0b;
  background: linear-gradient(135deg, #fefbf3, #fef3c7);
}

.kpi-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.kpi-value {
  font-size: 1.1rem;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 2px;
}

.kpi-money {
  font-size: 1rem;
  font-weight: 600;
  color: #059669;
}

.kpi-hoy .kpi-value { color: #2563eb; }
.kpi-semana .kpi-value { color: #059669; }
.kpi-total .kpi-value { color: #d97706; }

/* Responsive */
@media (max-width: 768px) {
  .kpis-row {
    flex-direction: column;
  }
  
  .kpi {
    min-width: auto;
  }
}